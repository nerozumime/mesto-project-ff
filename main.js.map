{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export function closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeModalWithEsc);\r\n} \r\n\r\nfunction closeModalWithEsc(evt) {\r\n  if (evt.key == \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup_is-opened\");\r\n    closeModal(openedPopup);\r\n  }\r\n}\r\n\r\nexport function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeModalWithEsc);\r\n}","const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction getCardTemplate(){\r\n  return cardTemplate.querySelector(\".card\").cloneNode(true);\r\n}\r\n\r\nexport function addCard(item, profileId, tryDeleteCard, likeCard, showFullImage) {\r\n    const card = getCardTemplate();\r\n\r\n    const likeCounter = card.querySelector('.like-counter');\r\n    likeCounter.textContent = item.likes.length;\r\n    item.likes.length > 0 ? likeCounter.setAttribute('style', 'opacity: 1;') : likeCounter.setAttribute('style', 'opacity: 0;')\r\n    if(item.likes.some((like) => like._id == profileId)){\r\n      card.querySelector('.card__like-button').classList.add('card__like-button_is-active');\r\n    }\r\n\r\n    if(item.owner._id !== profileId){\r\n      card.querySelector('.card__delete-button').remove();\r\n    } else {\r\n      card.querySelector('.card__delete-button').addEventListener('click', () => tryDeleteCard(card, item._id));\r\n    }\r\n\r\n    card.querySelector(\".card__title\").textContent = item.name;\r\n    const cardImage = card.querySelector(\".card__image\");\r\n    cardImage.src = item.link;\r\n    cardImage.alt = item.name;    \r\n    card.querySelector('.card__like-button').addEventListener('click', () => likeCard(card, item._id));   \r\n    cardImage.addEventListener('click', ()=> showFullImage(item.name, item.link)); \r\n    return card;\r\n}\r\n\r\n\r\n\r\n\r\n","function isValid (form, input, validationParameters){\r\n  if(input.validity.patternMismatch){\r\n    input.setCustomValidity(\"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы\")\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n\r\n  if(!input.validity.valid){\r\n    showInputError(form, input, input.validationMessage, validationParameters);\r\n  } else {\r\n    hideInputError(form, input, validationParameters);\r\n  }\r\n}\r\n\r\nconst showInputError = (form, input, errorMessage, validationParameters) => {\r\n  const errorElement = form.querySelector(`#${input.id}-error`);\r\n  errorElement.textContent = errorMessage; \r\n  errorElement.classList.add(validationParameters.errorClass);\r\n};\r\n\r\nfunction hideInputError(form, input, validationParameters){\r\n  const errorElement = form.querySelector(`#${input.id}-error`);\r\n  errorElement.textContent = '';\r\n  errorElement.classList.remove(validationParameters.errorClass);\r\n}\r\n\r\nfunction hasInvalidInput(form, validationParameters){\r\n  const inputList = Array.from(form.querySelectorAll(validationParameters.inputSelector));\r\n  return inputList.some(item => !item.validity.valid || item.validity.valueMissing);\r\n}\r\n\r\nfunction toggleFormButton(form, validationParameters){\r\n  const formButton = form.querySelector(validationParameters.submitButtonSelector);\r\n  if(hasInvalidInput(form, validationParameters)){\r\n    formButton.disabled = true;\r\n  } else {\r\n    formButton.disabled = false;\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationParameters){\r\n  const inputList = Array.from(formElement.querySelectorAll(validationParameters.inputSelector));\r\n\r\n  inputList.forEach(inputElement => {\r\n    inputElement.addEventListener('input', () => {\r\n      isValid(formElement, inputElement, validationParameters);\r\n      toggleFormButton(formElement, validationParameters);\r\n    });\r\n  });\r\n};\r\n\r\nexport function clearValidation(form,validationParameters){\r\n  const inputList = Array.from(form.querySelectorAll(validationParameters.inputSelector));\r\n  toggleFormButton(form, validationParameters);\r\n  inputList.forEach(item => {\r\n    isValid(form, item, validationParameters);\r\n    hideInputError(form, item, validationParameters);\r\n  });\r\n}\r\n\r\nexport function enableValidation(validationParameters){\r\n  const forms = Array.from(document.querySelectorAll(validationParameters.formSelector));\r\n  forms.forEach(form => {\r\n    setEventListeners(form, validationParameters)\r\n  });\r\n}; ","const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-32',\r\n  headers: {\r\n    authorization: '02b9c19d-79dc-493d-abd5-a076a605d6c6',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\nfunction checkResStatus(res){\r\n  if(res.ok){\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport function getProfileData(){\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n    .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function getInitialCardsData(){\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n        headers: config.headers\r\n    })\r\n    .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function getProfileEdit(name, about){\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about\r\n    })\r\n  })\r\n  .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function getAddNewCard(name, link){\r\n  return fetch(`${config.baseUrl}/cards`,{\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link\r\n    })\r\n  })\r\n  .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function deleteCardByID(cardId){\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function putLike(cardId){\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  })\r\n  .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function deleteLike(cardId){\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then(res => checkResStatus(res));\r\n}\r\n\r\nexport function changeAvatar(avatar){\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar\r\n    })\r\n  })\r\n  .then(res => checkResStatus(res));\r\n}","import './pages/index.css'; // импорт главного файла стилей \r\nimport {closeModal, openModal} from './scripts/modal'\r\nimport {addCard} from './scripts/card'\r\nimport {enableValidation, clearValidation} from './scripts/validation.js';\r\nimport {\r\n  getProfileData, getInitialCardsData ,getProfileEdit,\r\n  getAddNewCard, changeAvatar, deleteCardByID, \r\n  putLike, deleteLike} from './scripts/api.js';\r\n\r\nconst validationParameters = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n}\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\n\r\n// popupEditProfile\r\nconst buttonProfileEdit = document.querySelector('.profile__edit-button');\r\nconst popupProfileEdit = document.querySelector('.popup_type_edit');\r\nconst popupContent = document.querySelector('.popup__content');\r\nconst formEditProfile = document.forms['edit-profile'];\r\nconst profileAvatar = document.querySelector('.profile__image');\r\n\r\nbuttonProfileEdit.addEventListener('click', ()=> {\r\n  profileEditInputName.value = profileTitle.textContent;\r\n  profileEditInputDescription.value = profileDescription.textContent;\r\n  clearValidation(formEditProfile, validationParameters);\r\n  openModal(popupProfileEdit);\r\n});\r\n\r\nconst profileInfo = document.querySelector('.profile__info');\r\nconst profileTitle = profileInfo.querySelector('.profile__title');\r\nconst profileDescription = profileInfo.querySelector('.profile__description');\r\nconst profileEditInputName = popupContent.querySelector('.popup__input_type_name');\r\nconst profileEditInputDescription = popupContent.querySelector('.popup__input_type_description');\r\n\r\nfunction handleProfileEditFormSubmit(evt) {\r\n  evt.preventDefault(); \r\n  const saveButton = formEditProfile.querySelector('.popup__button');\r\n  saveButton.textContent = 'Сохранить...';\r\n  getProfileEdit(profileEditInputName.value, profileEditInputDescription.value)\r\n  .then(() => {\r\n    profileTitle.textContent = profileEditInputName.value;\r\n    profileDescription.textContent = profileEditInputDescription.value;\r\n    closeModal(popupProfileEdit);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n  .finally(() => {\r\n    saveButton.textContent = 'Сохранить';\r\n  })\r\n}\r\nformEditProfile.addEventListener('submit', handleProfileEditFormSubmit);\r\n\r\n// popupAddNewPlace \r\nconst buttonAddNewPlace = document.querySelector('.profile__add-button');\r\nconst formAddNewPlace = document.forms['new-place'];\r\nconst popupAddNewPlace = document.querySelector('.popup_type_new-card');\r\nconst newPlaceInputTitle = popupAddNewPlace.querySelector('.popup__input_type_card-name');\r\nconst newPlaceInputLink = popupAddNewPlace.querySelector('.popup__input_type_url');\r\n\r\nlet profileId;\r\n\r\nfunction handleAddNewPlaceSubmit(evt) {\r\n  evt.preventDefault();\r\n  const saveButton = formAddNewPlace.querySelector('.popup__button');\r\n  saveButton.textContent = 'Сохранить...';\r\n  getAddNewCard(newPlaceInputTitle.value, newPlaceInputLink.value)\r\n  .then((card) => {\r\n    placesList.prepend(addCard(card, profileId, tryDeleteCard, likeCard, showFullImage));\r\n    closeModal(popupAddNewPlace);\r\n    formAddNewPlace.reset();\r\n    clearValidation(formAddNewPlace, validationParameters);\r\n  }) \r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n  .finally(()=> {\r\n    saveButton.textContent = 'Сохранить';\r\n  })\r\n}\r\n\r\nbuttonAddNewPlace.addEventListener('click', ()=> {\r\n  openModal(popupAddNewPlace);\r\n});\r\n\r\nformAddNewPlace.addEventListener('submit', handleAddNewPlaceSubmit);\r\n\r\n// popupShowFullImage\r\nconst popupShowFullImage = document.querySelector('.popup_type_image');\r\nconst imageInputTitle = popupShowFullImage.querySelector('.popup__caption');\r\nconst imageInputLink = popupShowFullImage.querySelector('.popup__image');\r\n\r\nfunction showFullImage(name, link){\r\n  imageInputTitle.textContent = name;\r\n  imageInputLink.setAttribute('src', link);\r\n  imageInputLink.setAttribute('alt', name);\r\n  openModal(popupShowFullImage);\r\n}\r\n\r\n// Every popup is animated, close with esc and with button-close\r\ndocument.querySelectorAll('.popup').forEach((item)=> {\r\n  item.classList.add('popup_is-animated');\r\n  item.addEventListener('mousedown', (evt) => { \r\n    if (evt.target.classList.contains('popup')) {\r\n      closeModal(item); \r\n    }; \r\n  }); \r\n  item.querySelector('.popup__close').addEventListener('click', ()=>closeModal(item));\r\n})\r\n\r\n// 7 sprint\r\nenableValidation(validationParameters);\r\n\r\n// api\r\nPromise.all([getProfileData(), getInitialCardsData()])\r\n  .then(([profileData, cardsData]) => {\r\n    profileId = profileData._id;\r\n    profileTitle.textContent = profileData.name;\r\n    profileDescription.textContent = profileData.about;\r\n    profileAvatar.style.backgroundImage = `url('${profileData.avatar}')`;\r\n    cardsData.forEach(card => {\r\n      placesList.append(addCard(card, profileData._id, tryDeleteCard, likeCard, showFullImage));\r\n    })\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\n// avatar \r\nconst popupChangeAvatar = document.querySelector('.popup_type_change-avatar');\r\nconst formChangeAvatar = document.forms['change-avatar'];\r\nconst popupInputChangeAvatar = formChangeAvatar.querySelector('.popup__input_type_avatar');\r\n\r\nprofileAvatar.addEventListener('click', ()=> {\r\n  openModal(popupChangeAvatar);\r\n  formChangeAvatar.reset();\r\n  clearValidation(formChangeAvatar, validationParameters);\r\n})\r\n\r\nfunction handleChangeAvatarSubmit(evt){\r\n  evt.preventDefault();\r\n  const saveButton = formChangeAvatar.querySelector('.popup__button');\r\n  saveButton.textContent = 'Сохранить...';\r\n  changeAvatar(popupInputChangeAvatar.value)\r\n    .then(() => {\r\n      profileAvatar.style.backgroundImage = `url('${popupInputChangeAvatar.value}')`;\r\n      closeModal(popupChangeAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(()=> {\r\n      saveButton.textContent = 'Сохранить';\r\n    })\r\n}\r\nformChangeAvatar.addEventListener('submit', handleChangeAvatarSubmit);\r\n\r\n\r\n\r\nfunction likeCard(card, cardId) {\r\n  const likeCounter = card.querySelector('.like-counter');  \r\n  if(card.querySelector('.card__like-button').classList.contains('card__like-button_is-active')){\r\n    // remove like \r\n    deleteLike(cardId).then((card) => {\r\n      card.likes.length > 0 ? likeCounter.setAttribute('style', 'opacity: 1;') : likeCounter.setAttribute('style', 'opacity: 0;')\r\n      likeCounter.textContent = card.likes.length;\r\n    })\r\n  } else {\r\n    // add like\r\n    putLike(cardId).then((card) => {\r\n      card.likes.length > 0 ? likeCounter.setAttribute('style', 'opacity: 1;') : likeCounter.setAttribute('style', 'opacity: 0;')\r\n      likeCounter.textContent = card.likes.length;\r\n    })\r\n  }\r\n  card.querySelector('.card__like-button').classList.toggle('card__like-button_is-active');\r\n}; \r\n\r\n// popup delete card\r\nconst popupDeleteCard = document.querySelector('.popup_type_delete-card');\r\nconst formDeleteCard = document.forms['delete-card'];\r\n\r\nlet currCard;\r\nlet currCardId;\r\n\r\nfunction tryDeleteCard(card, cardId) {\r\n  openModal(popupDeleteCard);\r\n  currCard = card;\r\n  currCardId = cardId;\r\n}; \r\n\r\nfunction handleDeleteCard(evt){\r\n  evt.preventDefault();\r\n  deleteCardFromServer(currCard, currCardId);\r\n}\r\n\r\nformDeleteCard.addEventListener('submit', handleDeleteCard);\r\n\r\nfunction deleteCardFromServer(currCard, currCardId) {\r\n  deleteCardByID(currCardId)\r\n  .then(() => {\r\n    currCard.remove(); \r\n    closeModal(popupDeleteCard)\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n}; "],"names":["closeModal","modal","classList","remove","document","removeEventListener","closeModalWithEsc","evt","key","querySelector","openModal","add","addEventListener","cardTemplate","content","addCard","item","profileId","tryDeleteCard","likeCard","showFullImage","card","cloneNode","likeCounter","textContent","likes","length","setAttribute","some","like","_id","owner","name","cardImage","src","link","alt","isValid","form","input","validationParameters","validity","patternMismatch","setCustomValidity","valid","hideInputError","showInputError","validationMessage","errorMessage","errorElement","concat","id","errorClass","toggleFormButton","formButton","submitButtonSelector","Array","from","querySelectorAll","inputSelector","valueMissing","hasInvalidInput","disabled","clearValidation","inputList","forEach","config","baseUrl","headers","authorization","checkResStatus","res","ok","json","Promise","reject","status","formSelector","inactiveButtonClass","inputErrorClass","placesList","buttonProfileEdit","popupProfileEdit","popupContent","formEditProfile","forms","profileAvatar","profileEditInputName","value","profileTitle","profileEditInputDescription","profileDescription","profileInfo","preventDefault","about","saveButton","fetch","method","body","JSON","stringify","then","catch","err","console","log","finally","buttonAddNewPlace","formAddNewPlace","popupAddNewPlace","newPlaceInputTitle","newPlaceInputLink","prepend","reset","popupShowFullImage","imageInputTitle","imageInputLink","target","contains","formElement","inputElement","setEventListeners","enableValidation","all","_ref","_ref2","profileData","cardsData","style","backgroundImage","avatar","append","popupChangeAvatar","formChangeAvatar","popupInputChangeAvatar","cardId","deleteLike","putLike","toggle","currCard","currCardId","popupDeleteCard","deleteCardFromServer"],"sourceRoot":""}