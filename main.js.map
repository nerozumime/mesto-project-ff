{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export function closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeModalWithEsc);\r\n} \r\n\r\nfunction closeModalWithEsc(evt) {\r\n  if (evt.key == \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup_is-opened\");\r\n    closeModal(openedPopup);\r\n  }\r\n}\r\n\r\nexport function openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeModalWithEsc);\r\n}","const cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nexport function addCard(item, profileId, tryDeleteCard, likeCard, showFullImage) {\r\n    const card = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n\r\n    const likeCounter = card.querySelector('.like-counter');\r\n    likeCounter.textContent = item.likes.length;\r\n    item.likes.length > 0 ? likeCounter.setAttribute('style', 'opacity: 1;') : likeCounter.setAttribute('style', 'opacity: 0;')\r\n    if(item.likes.some((like) => like._id == profileId)){\r\n      card.querySelector('.card__like-button').classList.add('card__like-button_is-active');\r\n    }\r\n\r\n    if(item.owner._id !== profileId){\r\n      card.querySelector('.card__delete-button').remove();\r\n    } else {\r\n      card.querySelector('.card__delete-button').addEventListener('click', () => tryDeleteCard(card, item._id));\r\n    }\r\n\r\n    card.querySelector(\".card__title\").textContent = item.name;\r\n    const cardImage = card.querySelector(\".card__image\");\r\n    cardImage.src = item.link;\r\n    cardImage.alt = item.name;    \r\n    card.querySelector('.card__like-button').addEventListener('click', () => likeCard(card, item._id));   \r\n    cardImage.addEventListener('click', ()=> showFullImage(item.name, item.link)); \r\n    return card;\r\n}\r\n\r\n\r\n\r\n\r\n","function isValid (form, input, validationParameters){\r\n  if(input.validity.patternMismatch){\r\n    input.setCustomValidity(\"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы\")\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n\r\n  if(!input.validity.valid){\r\n    showInputError(form, input, input.validationMessage, validationParameters);\r\n  } else {\r\n    hideInputError(form, input, validationParameters);\r\n  }\r\n}\r\n\r\nconst showInputError = (form, input, errorMessage, validationParameters) => {\r\n  const errorElement = form.querySelector(`#${input.id}-error`);\r\n  errorElement.textContent = errorMessage; \r\n  errorElement.classList.add(validationParameters.errorClass);\r\n};\r\n\r\nfunction hideInputError(form, input, validationParameters){\r\n  const errorElement = form.querySelector(`#${input.id}-error`);\r\n  errorElement.textContent = '';\r\n  errorElement.classList.remove(validationParameters.errorClass);\r\n}\r\n\r\nfunction hasInvalidInput(form, validationParameters){\r\n  const inputList = Array.from(form.querySelectorAll(validationParameters.inputSelector));\r\n  return inputList.some(item => !item.validity.valid || item.validity.valueMissing);\r\n}\r\n\r\nfunction toggleFormButton(form, validationParameters){\r\n  const formButton = form.querySelector(validationParameters.submitButtonSelector);\r\n  if(hasInvalidInput(form, validationParameters)){\r\n    formButton.disabled = true;\r\n  } else {\r\n    formButton.disabled = false;\r\n  }\r\n}\r\n\r\nfunction setEventListeners(formElement, validationParameters){\r\n  const inputList = Array.from(formElement.querySelectorAll(validationParameters.inputSelector));\r\n\r\n  inputList.forEach(inputElement => {\r\n    inputElement.addEventListener('input', () => {\r\n      isValid(formElement, inputElement, validationParameters);\r\n      toggleFormButton(formElement, validationParameters);\r\n    });\r\n  });\r\n};\r\n\r\nexport function clearValidation(form,validationParameters){\r\n  const inputList = Array.from(form.querySelectorAll(validationParameters.inputSelector));\r\n  toggleFormButton(form, validationParameters);\r\n  inputList.forEach(item => {\r\n    isValid(form, item, validationParameters);\r\n    hideInputError(form, item, validationParameters);\r\n  });\r\n}\r\n\r\nexport function enableValidation(validationParameters){\r\n  const forms = Array.from(document.querySelectorAll(validationParameters.formSelector));\r\n  forms.forEach(form => {\r\n    setEventListeners(form, validationParameters)\r\n  });\r\n}; ","const config = {\r\n  baseUrl: 'https://nomoreparties.co/v1/wff-cohort-32',\r\n  headers: {\r\n    authorization: '02b9c19d-79dc-493d-abd5-a076a605d6c6',\r\n    'Content-Type': 'application/json'\r\n  }\r\n}\r\n\r\nexport function serverRequestProfileData(){\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'GET',\r\n    headers: config.headers\r\n  })\r\n    .then(res => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestInitialCardsData(){\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n        headers: config.headers\r\n    })\r\n    .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestProfileEdit(name, about){\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about\r\n    })\r\n  })\r\n  .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestAddNewCard(name, link){\r\n  return fetch(`${config.baseUrl}/cards`,{\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link\r\n    })\r\n  })\r\n  .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestDeleteCardByID(cardId){\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestPutLike(cardId){\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers\r\n  })\r\n  .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestDeleteLike(cardId){\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers\r\n  })\r\n  .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}\r\n\r\nexport function serverRequestChangeAvatar(avatar){\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar\r\n    })\r\n  })\r\n  .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n}","import './pages/index.css'; // импорт главного файла стилей \r\nimport {closeModal, openModal} from './scripts/modal'\r\nimport {addCard} from './scripts/card'\r\nimport {enableValidation, clearValidation} from './scripts/validation.js';\r\nimport {\r\n  serverRequestProfileData, serverRequestInitialCardsData ,serverRequestProfileEdit,\r\n  serverRequestAddNewCard, serverRequestChangeAvatar, serverRequestDeleteCardByID, \r\n  serverRequestPutLike, serverRequestDeleteLike} from './scripts/api.js';\r\n\r\nconst validationParameters = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n}\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\n\r\n// popupEditProfile\r\nconst buttonProfileEdit = document.querySelector('.profile__edit-button');\r\nconst popupProfileEdit = document.querySelector('.popup_type_edit');\r\nconst popupContent = document.querySelector('.popup__content');\r\nconst formEditProfile = document.forms['edit-profile'];\r\nconst profileAvatar = document.querySelector('.profile__image');\r\n\r\nbuttonProfileEdit.addEventListener('click', ()=> {\r\n  profileEditInputName.value = profileTitle.textContent;\r\n  profileEditInputDescription.value = profileDescription.textContent;\r\n  clearValidation(formEditProfile, validationParameters);\r\n  openModal(popupProfileEdit);\r\n});\r\n\r\nconst profileInfo = document.querySelector('.profile__info');\r\nconst profileTitle = profileInfo.querySelector('.profile__title');\r\nconst profileDescription = profileInfo.querySelector('.profile__description');\r\nconst profileEditInputName = popupContent.querySelector('.popup__input_type_name');\r\nconst profileEditInputDescription = popupContent.querySelector('.popup__input_type_description');\r\n\r\nfunction handleProfileEditFormSubmit(evt) {\r\n  evt.preventDefault(); \r\n  const saveButton = formEditProfile.querySelector('.popup__button');\r\n  saveButton.textContent = 'Сохранить...';\r\n  serverRequestProfileEdit(profileEditInputName.value, profileEditInputDescription.value)\r\n  .then(() => {\r\n    profileTitle.textContent = profileEditInputName.value;\r\n    profileDescription.textContent = profileEditInputDescription.value;\r\n    closeModal(popupProfileEdit);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  })\r\n  .finally(() => {\r\n    saveButton.textContent = 'Сохранить';\r\n  })\r\n}\r\nformEditProfile.addEventListener('submit', handleProfileEditFormSubmit);\r\n\r\n// popupAddNewPlace \r\nconst buttonAddNewPlace = document.querySelector('.profile__add-button');\r\nconst formAddNewPlace = document.forms['new-place'];\r\nconst popupAddNewPlace = document.querySelector('.popup_type_new-card');\r\nconst newPlaceInputTitle = popupAddNewPlace.querySelector('.popup__input_type_card-name');\r\nconst newPlaceInputLink = popupAddNewPlace.querySelector('.popup__input_type_url');\r\n\r\nlet profileId;\r\n\r\nfunction handleAddNewPlaceSubmit(evt) {\r\n  evt.preventDefault();\r\n  serverRequestAddNewCard(newPlaceInputTitle.value, newPlaceInputLink.value)\r\n  .then((card) => {\r\n    placesList.prepend(addCard(card, profileId, tryDeleteCard, likeCard, showFullImage));\r\n    closeModal(popupAddNewPlace);\r\n  }) \r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n}\r\n\r\nbuttonAddNewPlace.addEventListener('click', ()=> {\r\n  formAddNewPlace.reset();\r\n  clearValidation(formAddNewPlace, validationParameters);\r\n  openModal(popupAddNewPlace);\r\n});\r\n\r\nformAddNewPlace.addEventListener('submit', handleAddNewPlaceSubmit);\r\n\r\n// popupShowFullImage\r\nconst popupShowFullImage = document.querySelector('.popup_type_image');\r\nconst imageInputTitle = popupShowFullImage.querySelector('.popup__caption');\r\nconst imageInputLink = popupShowFullImage.querySelector('.popup__image');\r\n\r\nfunction showFullImage(name, link){\r\n  imageInputTitle.textContent = name;\r\n  imageInputLink.setAttribute('src', link);\r\n  imageInputLink.setAttribute('alt', name);\r\n  openModal(popupShowFullImage);\r\n}\r\n\r\n// Every popup is animated, close with esc and with button-close\r\ndocument.querySelectorAll('.popup').forEach((item)=> {\r\n  item.classList.add('popup_is-animated');\r\n  item.addEventListener('mousedown', (evt) => { \r\n    if (evt.target.classList.contains('popup')) {\r\n      closeModal(item); \r\n    }; \r\n  }); \r\n  item.querySelector('.popup__close').addEventListener('click', ()=>closeModal(item));\r\n})\r\n\r\n// 7 sprint\r\nenableValidation(validationParameters);\r\n\r\n// api\r\nPromise.all([serverRequestProfileData(), serverRequestInitialCardsData()])\r\n  .then(([profileData, cardsData]) => {\r\n    profileId = profileData._id;\r\n    profileTitle.textContent = profileData.name;\r\n    profileDescription.textContent = profileData.about;\r\n    profileAvatar.style.backgroundImage = `url('${profileData.avatar}')`;\r\n    cardsData.forEach(card => {\r\n      placesList.append(addCard(card, profileData._id, tryDeleteCard, likeCard, showFullImage));\r\n    })\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\n// avatar \r\nconst popupChangeAvatar = document.querySelector('.popup_type_change-avatar');\r\nconst formChangeAvatar = document.forms['change-avatar'];\r\nconst popupInputChangeAvatar = formChangeAvatar.querySelector('.popup__input_type_avatar');\r\n\r\nprofileAvatar.addEventListener('click', ()=> {\r\n  openModal(popupChangeAvatar);\r\n  formChangeAvatar.reset();\r\n  clearValidation(formChangeAvatar, validationParameters);\r\n})\r\n\r\nfunction handleChangeAvatarSubmit(evt){\r\n  evt.preventDefault();\r\n  serverRequestChangeAvatar(popupInputChangeAvatar.value)\r\n    .then(() => {\r\n      profileAvatar.style.backgroundImage = `url('${popupInputChangeAvatar.value}')`;\r\n      closeModal(popupChangeAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\nformChangeAvatar.addEventListener('submit', handleChangeAvatarSubmit);\r\n\r\n\r\n\r\nfunction likeCard(card, cardId) {\r\n  const likeCounter = card.querySelector('.like-counter');  \r\n  if(card.querySelector('.card__like-button').classList.contains('card__like-button_is-active')){\r\n    // remove like \r\n    serverRequestDeleteLike(cardId).then((card) => {\r\n      card.likes.length > 0 ? likeCounter.setAttribute('style', 'opacity: 1;') : likeCounter.setAttribute('style', 'opacity: 0;')\r\n      likeCounter.textContent = card.likes.length;\r\n    })\r\n  } else {\r\n    // add like\r\n    serverRequestPutLike(cardId).then((card) => {\r\n      card.likes.length > 0 ? likeCounter.setAttribute('style', 'opacity: 1;') : likeCounter.setAttribute('style', 'opacity: 0;')\r\n      likeCounter.textContent = card.likes.length;\r\n    })\r\n  }\r\n  card.querySelector('.card__like-button').classList.toggle('card__like-button_is-active');\r\n}; \r\n\r\n// popup delete card\r\nconst popupDeleteCard = document.querySelector('.popup_type_delete-card');\r\nconst formDeleteCard = document.forms['delete-card'];\r\n\r\nlet currCard;\r\nlet currCardId;\r\n\r\nfunction tryDeleteCard(card, cardId) {\r\n  openModal(popupDeleteCard);\r\n  currCard = card;\r\n  currCardId = cardId;\r\n}; \r\n\r\nfunction handleDeleteCard(evt){\r\n  evt.preventDefault();\r\n  deleteCardFromServer(currCard, currCardId);\r\n}\r\n\r\nformDeleteCard.addEventListener('submit', handleDeleteCard);\r\n\r\nfunction deleteCardFromServer(currCard, currCardId) {\r\n  serverRequestDeleteCardByID(currCardId)\r\n  .then(() => {\r\n    currCard.remove(); \r\n    closeModal(popupDeleteCard)\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n}; "],"names":["closeModal","modal","classList","remove","document","removeEventListener","closeModalWithEsc","evt","key","querySelector","openModal","add","addEventListener","cardTemplate","content","addCard","item","profileId","tryDeleteCard","likeCard","showFullImage","card","cloneNode","likeCounter","textContent","likes","length","setAttribute","some","like","_id","owner","name","cardImage","src","link","alt","isValid","form","input","validationParameters","validity","patternMismatch","setCustomValidity","valid","hideInputError","showInputError","validationMessage","errorMessage","errorElement","concat","id","errorClass","toggleFormButton","formButton","submitButtonSelector","Array","from","querySelectorAll","inputSelector","valueMissing","hasInvalidInput","disabled","clearValidation","inputList","forEach","config","baseUrl","headers","authorization","formSelector","inactiveButtonClass","inputErrorClass","placesList","buttonProfileEdit","popupProfileEdit","popupContent","formEditProfile","forms","profileAvatar","profileEditInputName","value","profileTitle","profileEditInputDescription","profileDescription","profileInfo","preventDefault","about","saveButton","fetch","method","body","JSON","stringify","then","res","ok","json","Promise","reject","status","catch","err","console","log","finally","buttonAddNewPlace","formAddNewPlace","popupAddNewPlace","newPlaceInputTitle","newPlaceInputLink","reset","prepend","popupShowFullImage","imageInputTitle","imageInputLink","target","contains","formElement","inputElement","setEventListeners","enableValidation","all","_ref","_ref2","profileData","cardsData","style","backgroundImage","avatar","append","popupChangeAvatar","formChangeAvatar","popupInputChangeAvatar","cardId","serverRequestDeleteLike","serverRequestPutLike","toggle","currCard","currCardId","popupDeleteCard","deleteCardFromServer"],"sourceRoot":""}